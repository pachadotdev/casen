<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uso basico del paquete casen • casen</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Uso basico del paquete casen">
<meta property="og:description" content="casen">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">casen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-usage.html">Uso basico del paquete casen</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pachadotdev/casen/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Uso basico del paquete casen</h1>
                        <h4 data-toc-skip class="author">Mauricio
Vargas</h4>
            
            <h4 data-toc-skip class="date">2022-06-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pachadotdev/casen/blob/HEAD/vignettes/basic-usage.Rmd" class="external-link"><code>vignettes/basic-usage.Rmd</code></a></small>
      <div class="hidden name"><code>basic-usage.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="datos-de-ejemplo">Datos de ejemplo<a class="anchor" aria-label="anchor" href="#datos-de-ejemplo"></a>
</h2>
<p>El uso de este paquete se mostrara a partir de los datos de ejemplo.
Vamos a leer un subconjunto de la encuesta CASEN que corresponde a las
comunas con representatividad comunal en la Region de los Rios. Estos
datos se incluyen, a modo de demostracion, con el paquete casen, no asi
las encuestas completas que deben ser descargadas y se provee una
funcion para hacerlo.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pacha.dev/casen/" class="external-link">casen</a></span><span class="op">)</span>
<span class="va">casen_2017_los_rios</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 8,055 × 7</span></span>
<span class="co">##     expc varstrat     varunit ytotcorh       sexo           comuna       pobreza</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>    53   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">959</span>765 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 3<span style="color: #949494;"> [No pobres]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>    53   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">959</span>765 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 3<span style="color: #949494;"> [No pobres]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>    53   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">959</span>765 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 3<span style="color: #949494;"> [No pobres]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">283</span>273 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">283</span>273 1<span style="color: #949494;"> [Hombre]</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">283</span>273 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">353</span>083 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 3<span style="color: #949494;"> [No pobres]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">260</span>000 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">260</span>000 2<span style="color: #949494;"> [Mujer]</span>  <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>   105   <span style="text-decoration: underline;">141</span>283 <span style="text-decoration: underline;">14</span>128<span style="text-decoration: underline;">301</span>184   <span style="text-decoration: underline;">260</span>000 1<span style="color: #949494;"> [Hombre]</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span> 2<span style="color: #949494;"> [Pobres no…</span></span>
<span class="co">## <span style="color: #949494;"># … with 8,045 more rows</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="descargar-datos-desde-sitio-web-mds">Descargar datos desde sitio web MDS<a class="anchor" aria-label="anchor" href="#descargar-datos-desde-sitio-web-mds"></a>
</h2>
<p>Para descargar la encuesta CASEN es posible hacerlo desde el sitio
web del Ministerio de Desarrollo Social (oficial) o desde GitHub (no
oficial).</p>
<p>No se daran ejemplos con la encuesta casen completa ya que CRAN
limita el tiempo en segundos que puede tomar un ejemplo.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># todos los anios disponibles en carpeta casen-formato-stata</span>
<span class="fu"><a href="../reference/descargar_casen_mds.html">descargar_casen_mds</a></span><span class="op">(</span><span class="st">"casen-formato-stata"</span><span class="op">)</span>

<span class="co"># solo anio 2017 en carpeta casen-formato-stata</span>
<span class="fu"><a href="../reference/descargar_casen_mds.html">descargar_casen_mds</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="st">"casen-formato-stata"</span><span class="op">)</span>

<span class="co"># leer encuesta CASEN en formato DTA (Stata)</span>
<span class="co"># (se debe descomprimir con winRAR u otro)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span>
<span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">read_stata</a></span><span class="op">(</span><span class="st">"casen-formato-stata/Casen 2017.dta"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="descargar-datos-desde-github">Descargar datos desde GitHub<a class="anchor" aria-label="anchor" href="#descargar-datos-desde-github"></a>
</h2>
<p>En la misma linea de la seccion anterior, es posible descargar la
encuesta CASEN en formato R.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># todos los anios disponibles</span>
<span class="fu"><a href="../reference/descargar_casen_github.html">descargar_casen_github</a></span><span class="op">(</span><span class="st">"casen-formato-r"</span><span class="op">)</span>

<span class="co"># solo anio 2017</span>
<span class="fu"><a href="../reference/descargar_casen_github.html">descargar_casen_github</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="st">"casen-formato-r"</span><span class="op">)</span>

<span class="co"># leer encuesta CASEN en formato RDS (R)</span>
<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"casen-formato-r/2017.rds"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="disenios-complejos">Disenios complejos<a class="anchor" aria-label="anchor" href="#disenios-complejos"></a>
</h2>
<p>El valor agregado del paquete CASEN es que entrega una forma facil de
hacer calculos tomando en cuenta, ademas del disenio complejo, los
grados de libertad.</p>
<p>En el contexto de muestreo bietapico, el calculo de los grados de
libertad es un tema no resuelto, pero el paquete casen utiliza la
siguiente definicion del INE: “Los grados de libertad corresponden a la
diferencia entre el numero de conglomerados no vacios (con presencia de
la variable de interes) y el numero de estratos no vacios”.</p>
<p>En dominios de estimacion pequenios la perdida de grados de libertad
se vuelve bastante relevante. Esto es muy importante cuando se hacen
calculos agrupando por region, sexo, region y sexo, entre otras.</p>
<p>Al usar la funcion <code>svyby</code> del paquete survey, la funcion
no calcula correctamente los grados de libertad de cada dominio, sino
que considera un valor fijo para todos los dominios. Las funciones del
paquete casen usan esta funcion pero incluyen una serie de pasos
programados para usar los grados de libertad adecuados para cada dominio
de estimacion.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># disenio complejo a partir de  los datos de ejemplo</span>
<span class="va">cd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/configuracion_disenio.html">configuracion_disenio</a></span><span class="op">(</span><span class="va">casen_2017_los_rios</span>, <span class="st">"ytotcorh"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"comuna"</span>, <span class="st">"sexo"</span><span class="op">)</span>, <span class="st">"expc"</span><span class="op">)</span>
<span class="va">cd</span><span class="op">$</span><span class="va">disenio</span></code></pre></div>
<pre><code><span class="co">## Stratified 1 - level Cluster Sampling design (with replacement)</span>
<span class="co">## With (67) clusters.</span>
<span class="co">## Called via srvyr</span>
<span class="co">## Sampling variables:</span>
<span class="co">##  - ids: varunit</span>
<span class="co">##  - strata: varstrat</span>
<span class="co">##  - weights: expc</span>
<span class="co">## Data variables: ytotcorh (dbl), comuna (dbl+lbl), sexo (dbl+lbl), expc (dbl),</span>
<span class="co">##   varunit (dbl), varstrat (dbl)</span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cd</span><span class="op">$</span><span class="va">grupos</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 12 × 2</span></span>
<span class="co">##                 comuna       sexo</span>
<span class="co">##              <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    2<span style="color: #949494;"> [Mujer]</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   2<span style="color: #949494;"> [Mujer]</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    2<span style="color: #949494;"> [Mujer]</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 2<span style="color: #949494;"> [Mujer]</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    2<span style="color: #949494;"> [Mujer]</span> </span>
<span class="co">## <span style="color: #BCBCBC;">11</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   1<span style="color: #949494;"> [Hombre]</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   2<span style="color: #949494;"> [Mujer]</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="medidas-de-tendencia-central-con-disenio-complejo">Medidas de tendencia central con disenio complejo<a class="anchor" aria-label="anchor" href="#medidas-de-tendencia-central-con-disenio-complejo"></a>
</h2>
<p>La funcion <code>estadistica_descriptiva()</code> toma en cuenta el
disenio complejo y los grados de libertad. Puedo agrupar por una o mas
variables y la funcion entrega, ademas del promedio, el intervalo de
confianza.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># media, mediana y percentil 70</span>
<span class="fu"><a href="../reference/media_agrupada.html">media_agrupada</a></span><span class="op">(</span><span class="va">cd</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## <span style="color: #00BBBB;">•</span> Column `comuna`</span></code></pre>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 12 × 8</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   comuna_etiqueta [6]</span></span>
<span class="co">##        comuna_etiqueta sexo_etiqueta       comuna_codigo sexo_codigo      comuna</span>
<span class="co">##              <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    Mujer         <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    2           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    Hombre        <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    1           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   Hombre        <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   1           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   Mujer         <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   2           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    Hombre        <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    1           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    Mujer         <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    2           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> Mujer         <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 2           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> Hombre        <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 1           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    Hombre        <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    1           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    Mujer         <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    2           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">11</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   Hombre        <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   1           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   Mujer         <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   2           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #949494;"># … with 3 more variables: media_ytotcorh &lt;dbl&gt;, media_ytotcorh_inf &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   media_ytotcorh_sup &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/mediana_agrupada.html">mediana_agrupada</a></span><span class="op">(</span><span class="va">cd</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## <span style="color: #00BBBB;">•</span> Column `comuna`</span></code></pre>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 12 × 8</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   comuna_etiqueta [6]</span></span>
<span class="co">##        comuna_etiqueta sexo_etiqueta       comuna_codigo sexo_codigo      comuna</span>
<span class="co">##              <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    Mujer         <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    2           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    Hombre        <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivia]</span>    1           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   Hombre        <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   1           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   Mujer         <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lagos]</span>   2           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    Hombre        <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    1           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    Mujer         <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillaco]</span>    2           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> Mujer         <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 2           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> Hombre        <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguipulli]</span> 1           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    Hombre        <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    1           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    Mujer         <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unión]</span>    2           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">11</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   Hombre        <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   1           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span> <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   Mujer         <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bueno]</span>   2           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #949494;"># … with 3 more variables: mediana_ytotcorh &lt;dbl&gt;, mediana_ytotcorh_inf &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   mediana_ytotcorh_sup &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/percentiles_agrupados.html">percentiles_agrupados</a></span><span class="op">(</span><span class="va">cd</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## `mutate_if()` ignored the following grouping variables:</span>
<span class="co">## <span style="color: #00BBBB;">•</span> Column `comuna`</span></code></pre>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 12 × 8</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   comuna_etiqueta [6]</span></span>
<span class="co">##    percentil comuna_etiqueta sexo_etiqueta comuna_codigo sexo_codigo      comuna</span>
<span class="co">##        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl+lbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>       0.7 <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivi…</span> Mujer         <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdi…</span> 2           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>       0.7 <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdivi…</span> Hombre        <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Valdi…</span> 1           <span style="text-decoration: underline;">14</span>101<span style="color: #949494;"> [Val…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>       0.7 <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lag…</span> Hombre        <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los L…</span> 1           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>       0.7 <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los Lag…</span> Mujer         <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los L…</span> 2           <span style="text-decoration: underline;">14</span>104<span style="color: #949494;"> [Los…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>       0.7 <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillac…</span> Hombre        <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paill…</span> 1           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>       0.7 <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paillac…</span> Mujer         <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Paill…</span> 2           <span style="text-decoration: underline;">14</span>107<span style="color: #949494;"> [Pai…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>       0.7 <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguip…</span> Mujer         <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pangu…</span> 2           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>       0.7 <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Panguip…</span> Hombre        <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pangu…</span> 1           <span style="text-decoration: underline;">14</span>108<span style="color: #949494;"> [Pan…</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>       0.7 <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unió…</span> Hombre        <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Un…</span> 1           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>       0.7 <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Unió…</span> Mujer         <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La Un…</span> 2           <span style="text-decoration: underline;">14</span>201<span style="color: #949494;"> [La …</span></span>
<span class="co">## <span style="color: #BCBCBC;">11</span>       0.7 <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bue…</span> Hombre        <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río B…</span> 1           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #BCBCBC;">12</span>       0.7 <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río Bue…</span> Mujer         <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río B…</span> 2           <span style="text-decoration: underline;">14</span>204<span style="color: #949494;"> [Río…</span></span>
<span class="co">## <span style="color: #949494;"># … with 2 more variables: mediana_ytotcorh &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   mediana_ytotcorh_err_est &lt;dbl&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="uso-de-las-funciones-de-casen-y-dplyr">Uso de las funciones de casen y dplyr<a class="anchor" aria-label="anchor" href="#uso-de-las-funciones-de-casen-y-dplyr"></a>
</h2>
<p>Las funciones de <code>casen</code> estan pensadas para usarse en
conjunto con las de <code>dplyr</code>. Un ejemplo simple de esto es el
calculo del porcentaje de hogares pobres.</p>
<p>Veamos el caso puntual de las funciones <code>mutate</code> y
<code>filter</code> de dplyr.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Attaching package: 'dplyr'</span></code></pre>
<pre><code><span class="co">## The following objects are masked from 'package:stats':</span>
<span class="co">## </span>
<span class="co">##     filter, lag</span></code></pre>
<pre><code><span class="co">## The following objects are masked from 'package:base':</span>
<span class="co">## </span>
<span class="co">##     intersect, setdiff, setequal, union</span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># convierto pobreza a una variable binaria</span>
<span class="va">casen_2017_los_rios</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pobreza <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">pobreza</span> <span class="op">&lt;=</span> <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/configuracion_disenio.html">configuracion_disenio</a></span><span class="op">(</span><span class="st">"pobreza"</span>, <span class="st">"comuna"</span>, <span class="st">"expc"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/media_agrupada.html">media_agrupada</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="co">##   comuna_etiqueta comuna_codigo media_pobreza media_pobreza_inf media_pobreza_s…</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> Valdivia        14101                0.075<span style="text-decoration: underline;">3</span>            0.051<span style="text-decoration: underline;">3</span>           0.099<span style="text-decoration: underline;">3</span></span>
<span class="co">## <span style="color: #BCBCBC;">2</span> Los Lagos       14104                0.156             0.104            0.209 </span>
<span class="co">## <span style="color: #BCBCBC;">3</span> Paillaco        14107                0.209            -<span style="color: #BB0000;">0.075</span><span style="color: #BB0000; text-decoration: underline;">4</span>           0.494 </span>
<span class="co">## <span style="color: #BCBCBC;">4</span> Panguipulli     14108                0.133             0.092<span style="text-decoration: underline;">8</span>           0.173 </span>
<span class="co">## <span style="color: #BCBCBC;">5</span> La Unión        14201                0.132             0.065<span style="text-decoration: underline;">6</span>           0.198 </span>
<span class="co">## <span style="color: #BCBCBC;">6</span> Río Bueno       14204                0.170             0.073<span style="text-decoration: underline;">6</span>           0.266</span></code></pre>
</div>
<div class="section level2">
<h2 id="inferencia-con-disenios-complejos">Inferencia con disenios complejos<a class="anchor" aria-label="anchor" href="#inferencia-con-disenios-complejos"></a>
</h2>
<p>El paquete casen provee dos funciones para sacar el maximo partido a
las funciones de R tomando en cuenta el disenio complejo y los grados de
libertad.</p>
<p>Ajuste del modelo:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># modelo: ytotcorh = b0 + b1 comuna + b2 sexo + e</span>
<span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modelo_lineal_generalizado.html">modelo_lineal_generalizado</a></span><span class="op">(</span><span class="va">cd</span>, <span class="st">"ytotcorh ~ comuna + sexo"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Call:</span>
<span class="co">## svyglm(formula = stats::as.formula(modelo), design = disenio$disenio)</span>
<span class="co">## </span>
<span class="co">## Survey design:</span>
<span class="co">## Called via srvyr</span>
<span class="co">## </span>
<span class="co">## Coefficients:</span>
<span class="co">##               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">## (Intercept) 55655084.7 13884444.7   4.008 0.000192 ***</span>
<span class="co">## comuna         -3860.7      977.4  -3.950 0.000232 ***</span>
<span class="co">## sexo          -58713.5    23514.9  -2.497 0.015672 *  </span>
<span class="co">## ---</span>
<span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">## </span>
<span class="co">## (Dispersion parameter for gaussian family taken to be 1.491064e+12)</span>
<span class="co">## </span>
<span class="co">## Number of Fisher Scoring iterations: 2</span></code></pre>
</div>
<div class="section level2">
<h2 id="uso-de-las-funciones-de-casen-con-paquetes-tidy">Uso de las funciones de casen con paquetes “tidy”<a class="anchor" aria-label="anchor" href="#uso-de-las-funciones-de-casen-con-paquetes-tidy"></a>
</h2>
<p>Ademas de dplyr, casen se integra perfectamente con los paquetes del
<a href="https://www.tidyverse.org/" class="external-link">Tidyverse</a> y otros paquetes
afines.</p>
<p>Por ejemplo, el paquete broom permite obtener una tabla con los
intervalos de confianza para los betas estimados del modelo.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Loading required package: grid</span></code></pre>
<pre><code><span class="co">## Loading required package: Matrix</span></code></pre>
<pre><code><span class="co">## Loading required package: survival</span></code></pre>
<pre><code><span class="co">## </span>
<span class="co">## Attaching package: 'survey'</span></code></pre>
<pre><code><span class="co">## The following object is masked from 'package:graphics':</span>
<span class="co">## </span>
<span class="co">##     dotchart</span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor" class="external-link">janitor</a></span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Attaching package: 'janitor'</span></code></pre>
<pre><code><span class="co">## The following objects are masked from 'package:stats':</span>
<span class="co">## </span>
<span class="co">##     chisq.test, fisher.test</span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># usamos ddf y degf del paquete survey para hacer el mismo calculo</span>
<span class="co"># que realiza Stata</span>
<span class="va">mod_conf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://broom.tidymodels.org/reference/confint_tidy.html" class="external-link">confint_tidy</a></span><span class="op">(</span><span class="va">mod</span>, ddf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html" class="external-link">degf</a></span><span class="op">(</span><span class="va">cd</span><span class="op">$</span><span class="va">disenio</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning: confint_tidy is now deprecated and will be removed from a future</span>
<span class="co">## release of broom. Please use the applicable confint method.</span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod_conf</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 3 × 2</span></span>
<span class="co">##    conf.low conf.high</span>
<span class="co">##       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> 27<span style="text-decoration: underline;">830</span>036. 83<span style="text-decoration: underline;">480</span>134.</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>    -<span style="color: #BB0000; text-decoration: underline;">5</span><span style="color: #BB0000;">820.</span>    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">902.</span></span>
<span class="co">## <span style="color: #BCBCBC;">3</span>  -<span style="color: #BB0000; text-decoration: underline;">105</span><span style="color: #BB0000;">838.</span>   -<span style="color: #BB0000; text-decoration: underline;">11</span><span style="color: #BB0000;">589.</span></span></code></pre>
<p>Lo anterior se puede ordenar y presentar los betas junto con los
intervalos de confianza.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ordenamos la salida del modelo</span>
<span class="va">mod_betas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>

<span class="co"># pegamos las columnas</span>
<span class="va">mod_betas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">mod_betas</span>, <span class="va">mod_conf</span><span class="op">)</span>

<span class="co"># ordenamos los nombres de las columnas</span>
<span class="va">mod_betas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="va">mod_betas</span><span class="op">)</span>

<span class="va">mod_betas</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 3 × 7</span></span>
<span class="co">##   term         estimate std_error statistic  p_value  conf_low conf_high</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span> (Intercept) 55<span style="text-decoration: underline;">655</span>085. 13<span style="text-decoration: underline;">884</span>445.      4.01 0.000<span style="text-decoration: underline;">192</span> 27<span style="text-decoration: underline;">830</span>036. 83<span style="text-decoration: underline;">480</span>134.</span>
<span class="co">## <span style="color: #BCBCBC;">2</span> comuna         -<span style="color: #BB0000; text-decoration: underline;">3</span><span style="color: #BB0000;">861.</span>      977.     -<span style="color: #BB0000;">3.95</span> 0.000<span style="text-decoration: underline;">232</span>    -<span style="color: #BB0000; text-decoration: underline;">5</span><span style="color: #BB0000;">820.</span>    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">902.</span></span>
<span class="co">## <span style="color: #BCBCBC;">3</span> sexo          -<span style="color: #BB0000; text-decoration: underline;">58</span><span style="color: #BB0000;">714.</span>    <span style="text-decoration: underline;">23</span>515.     -<span style="color: #BB0000;">2.50</span> 0.015<span style="text-decoration: underline;">7</span>    -<span style="color: #BB0000; text-decoration: underline;">105</span><span style="color: #BB0000;">838.</span>   -<span style="color: #BB0000; text-decoration: underline;">11</span><span style="color: #BB0000;">589.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="comparabilidad-entre-encuestas">Comparabilidad entre encuestas<a class="anchor" aria-label="anchor" href="#comparabilidad-entre-encuestas"></a>
</h2>
<p>El paquete casen provee un conjunto de datos con la correspondencia
de los codigos de comunas.</p>
<p>Veamos como convertir los codigos de la encuesta CASEN 1990 a codigos
SUBDERE 2017.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">codigos_casen</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">valido_desde</span> <span class="op">==</span> <span class="fl">1990</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 323 × 4</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   codigo_casen, codigo_subdere_2017 [323]</span></span>
<span class="co">##    valido_desde valido_hasta codigo_casen codigo_subdere_2017</span>
<span class="co">##           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              </span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>017        <span style="text-decoration: underline;">11</span>201 11201              </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">5</span>605 05602              </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003        <span style="text-decoration: underline;">13</span>504 13502              </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">3</span>304 03302              </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">1</span>307 01107              </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003        <span style="text-decoration: underline;">10</span>402 10202              </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">4</span>104 04103              </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">9</span>101 09201              </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">2</span>301 02101              </span>
<span class="co">## <span style="color: #BCBCBC;">10</span>         <span style="text-decoration: underline;">1</span>990         <span style="text-decoration: underline;">2</span>003         <span style="text-decoration: underline;">8</span>204 08302              </span>
<span class="co">## <span style="color: #949494;"># … with 313 more rows</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">casen1990</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">read_sav</a></span><span class="op">(</span><span class="st">"casen-formato-spss/1990.sav"</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>comu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">comu</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span>
    <span class="va">codigos_casen</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">valido_desde</span> <span class="op">==</span> <span class="fl">1990</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"codigo"</span><span class="op">)</span><span class="op">)</span>,
    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"comu"</span> <span class="op">=</span> <span class="st">"codigo_casen"</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mauricio Vargas.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
